<!DOCTYPE html>
<html>
<head>
    <title>FCC Map Link Generator</title>
</head>
<body>

    <h2>FCC Map Link Generator</h2>
    <p>This tool helps you quickly generate filtered Provider Detail map links from a Location Summary URL, preserving the exact location.</p>

    <hr>

    <h3>Generate Provider Detail Link for Specific Location</h3>
    <p>
        Use this section to take a general location and get a filtered provider view, zoomed in on the exact coordinates.
        <br>
        <strong>Step A:</strong> Search for an address on the <a href="https://broadbandmap.fcc.gov/location-summary/mobile?version=dec2024&zoom=4&env=0&tech=tech4g" target="_blank">FCC Location Summary page</a>.
        <br>
        <strong>Step B:</strong> Copy the full URL from your browser's address bar.
        <br>
        <strong>Step C:</strong> Paste the URL below and click "Generate Link".
    </p>
    <input type="text" id="locationUrl" style="width: 500px;" placeholder="Paste Location Summary URL here">
    <button onclick="generateProviderLink()">Generate Link</button>

    <script>
        function generateProviderLink() {
            const fullUrl = document.getElementById('locationUrl').value;
            try {
                const url = new URL(fullUrl);
                const newVlon = url.searchParams.get('vlon');
                const newVlat = url.searchParams.get('vlat');

                if (newVlon && newVlat) {
                    // Increased zoom level for a more "zeroed-in" view (e.g., 17 or 18)
                    const enhancedZoom = 18; 
                    const baseProviderUrl = `https://broadbandmap.fcc.gov/provider-detail/mobile?version=dec2024&zoom=${enhancedZoom}`;
                    // Keep your specific provider filters
                    const providers = "&providers=130077_400_on%2C130403_400_on%2C131425_400_on&env=0&pct_cvg=0";
                    
                    const finalUrl = `${baseProviderUrl}&vlon=${newVlon}&vlat=${newVlat}${providers}`;
                    
                    window.open(finalUrl, '_blank');
                } else {
                    alert("Invalid URL. Please make sure the URL contains both vlon and vlat parameters from the Location Summary page.");
                }
            } catch (e) {
                alert("Invalid URL format. Please paste a valid FCC Location Summary map URL.");
            }
        }
    </script>

</body>
</html>
